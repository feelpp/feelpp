// -*- mode: javascript -*-
{
    "Name": "Test case 3D",
    "ShortName": "testcase3d",
    "Models":
    {
        "heat":[
            {
                "name":"heat1",
                "materials":["Omega_1"],
                "setup": {
                    "heat-sources":
                    {
                        "type":"heat-source",
                        "expr":"2*k_1*k_1:k_1"
                    }
                }
            },
            {
                "name":"heat2",
                "materials":["Omega_2"],
                "setup": {
                    "heat-sources":
                    {
                        "type":"heat-source",
                        "expr":"2*k_2*k_2:k_2"
                    }
                }
            }
        ]
    },
    "CRBParameters":
    {
        "k_2":
        {
            "min": "1",
            "max": "20"
        }
    },
    "Parameters":
    {
        "k_1":"1",
        "k_2":"5"
    },
    "Meshes":
    {
        "heat":
        {
            "Import":
            {
                "filename":"$cfgdir/2cubes.geo",
                "hsize": 0.1
            },
            "DistanceToRange":
            {
                "boundary":{
                    "markers":["Gamma_1","Gamma_2","Gamma_int","Gamma_dir","Gamma_neu"]
                },
                "Gamma_1":{
                    "markers":["Gamma_1"]
                },
                "Gamma_2":{
                    "markers":["Gamma_2"]
                },
                "Gamma_dir":{
                    "markers":["Gamma_dir"]
                },
                "Gamma_neu":{
                    "markers":["Gamma_neu"]
                },
                "Gamma_int":{
                    "markers":["Gamma_int"]
                }
            }
        }
    },
    "Materials":
    {
        "Omega_1":
        {
            "k":"k_1:k_1",
            "Cp":"1.4e6",
            "rho":"1"
        },
        "Omega_2":
        {
            "k":"k_2:k_2",
            "Cp":"1.4e6",
            "rho":"1"
        }
    },
    "BoundaryConditions": 
    {
        "heat": 
        {
            "temperature":
            {
                "Gamma_dir": {
                    "expr": "4*k_1:k_1"
                }
            },
            "flux": 
            {
                "Gamma_1": {
                    "expr": "0"
                },
                "Gamma_2": {
                    "expr": "0"
                },
                "Gamma_neu":{
                    "expr": "4*k_2*k_2:k_2"
                }
            }
        }
    },
    "CRBOutputs":
    {
        "Points_pointO_expr_TO":
        {
            "type":"point",
            "coord": [0,0,0]
        },
        "Statistics_Omega1_mean":
        {
            "type":"mean",
            "markers": ["Omega_1"],
            "expr": "crb_u:crb_u",
            "topodim": 3
        },
        "Statistics_Omega_2_mean":
        {
            "type":"mean",
            "markers": ["Omega_2"],
            "expr": "crb_u:crb_u",
            "topodim": 3
        },
        "Statistics_Gamma_int_mean":
        {
            "type":"mean",
            "markers": ["Gamma_int"],
            "expr": "crb_u/2:crb_u",    // as this is internal interface, we need to divide the value by cause because element are counted twice
            "topodim": 2
        }
    },
    "PostProcess":
    {
        "use-model-name":1,
        "heat":
        {
            "Exports":
            {
                "fields":["temperature","pid"]
            },
            "Measures":
            {
                "Statistics":
                {
                    "Omega1":
                    {
                        "type":"mean",
                        "markers":["Omega_1"],
                        "field": "temperature"
                    },
                    "Omega_2":
                    {
                        "type":"mean",
                        "markers":["Omega_2"],
                        "field": "temperature"
                    },
                    "Gamma_int":
                    {
                        "type":"mean",
                        "markers":["Gamma_int"],
                        "field": "temperature"
                    }
                },
                "Points":
                {
                    "pointO":
                    {
                        "coord": "{0, 0, 0}",
                        "expressions": { "TO": "heat_T:heat_T"}
                    }
                }
            }

        }
    }
}