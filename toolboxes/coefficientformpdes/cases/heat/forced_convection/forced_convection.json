// -*- mode: javascript -*-
{
    "Name": "Test heat toolbox",
    "ShortName":"TestHeat",
    "Models":
    {
        "cfpdes":{
            "equations":"heat"
        },
        "heat":{
            "setup":{
                "unknown":{
                    "basis":"Pch1",
                    "name":"temperature",
                    "symbol":"T"
                },
                "coefficients":{
                    "c":"materials_k:materials_k",
                    "d":"materials_rho*materials_Cp:materials_rho:materials_Cp",
                    "beta":"{materials_rho*materials_Cp*meshes_cfpdes_fields_v_0,materials_rho*materials_Cp*meshes_cfpdes_fields_v_1}:materials_rho:materials_Cp:meshes_cfpdes_fields_v_0:meshes_cfpdes_fields_v_1"
                }
            }
        }
    },
    "Meshes":
    {
        "cfpdes":
        {
            "Import":
            {
                //"filename":"$repository/toolboxes/fluid/TurekHron/cfd2/P2P1G1/np_1/fluid.msh"
                //"filename":"$repository/toolboxes/fluid/TurekHron/cfd2/P2P1G1/np_24/fluid.mesh.json"
                "filename":"$repository/toolboxes/fluid/TurekHron/cfd2/P2P1G1/np_24/meshes/tmp/mesh_o.json" // WARNING the field is define on the adapted (TODO: improve mesh/fields management)
            },
            "Fields":
            {
                "v":
                {
                    //"filename":"$repository/toolboxes/fluid/TurekHron/cfd2/P2P1G1/np_1/fluid.save/velocity.h5",
                    "filename":"$repository/toolboxes/fluid/TurekHron/cfd2/P2P1G1/np_24/fluid.save/velocity.h5",
                    "basis":"Pchv2"
                }
            }
        }
    },
    "Materials":
    {
        "Fluid":{
            "markers":"Fluid",
            "rho":"1.0e3",
            "mu":"1.0",
            "k":"2.9e-5",
            "Cp":"4185"
        }
    },
    "BoundaryConditions":
    {
        "heat":
        {
            "Dirichlet":
            {
                "inlet":
                {
                    "expr":"( 293.15-10*(y-0.15)*(y-0.25)/(0.2^2) )*(y>0.15)*(y<0.25)+(293.15*(y<(0.15-1e-9)))+(293.15*(y>(0.25-1e-9))):y"
                }
            }
        }
    },
    "InitialConditions":
    {
        "heat":{
            "temperature":{
                "Expression":{
                    "myic":{
                        "markers":"Fluid",
                        "expr":293.15
                    }
                }
            }
        }
    },
    "PostProcess":
    {
        "cfpdes":
        {
            "Exports":
            {
                "fields":["heat.temperature"],
                "expr":
                {
                    "heat_beta":"{physics_heat_heat_beta_0,physics_heat_heat_beta_1}:physics_heat_heat_beta_0:physics_heat_heat_beta_1"
                }
            }
        }
    }
}
