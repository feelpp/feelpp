// -*- mode: javascript -*-
{
    "Name":"bitter",
    "ShortName":"bitter",
    "Parameters":
    {
        "sigma0":58e3,
        "T0":290,
        "alpha":3.6e-3,
        "Lorentz":2.47e-8
    },
    "Meshes":
    {
        "thermoelectric":
        {
            "Import":
            {
                //"filename":"girder:{file:5e4688bcb0e95704757e263b}",
                "filename":"girder:{file:5e4688bcb0e95704757e2638}", //fine
                "partition":1
            }
        }
    },
    "Materials":
    {
        "omega":
        {
            "k":"sigma0*Lorentz*heat_T/(1+alpha*(heat_T-T0)):sigma0:alpha:T0:Lorentz:heat_T",
            "sigma":"sigma0/(1+alpha*(heat_T-T0))+0*heat_T:sigma0:alpha:T0:heat_T"
        }
    },
    "InitialConditions":
    {
        "heat":{
            "temperature":{
                "Expression":{
                    "myic1":{
                        "expr":"293"
                    }
                }
            }
        }
    },
    "BoundaryConditions":
    {
        "heat":
        {
            "convective_heat_flux":
            {
                "bitter_robin":
                {
                    "markers":["Channel0","Channel1","TieRods","CoolingHoles"],
                    "h":"0.08",
                    "Text":"293"
                }
            },
            "flux":
            {
                "bitter_neumann":
                {
                    "markers":["V0","V1","top","bottom"],
                    "expr":"0"
                }
            }
        },
        "electric":
        {
            "ground":{ "markers":"V0" },
            "electric-potential":
            {
                "V1":
                {
                    "expr":"-0.04"
                }
            },
            "Neumann":
            {
                "bitter_neumann":
                {
                    "markers":["Channel0","Channel1","CoolingHoles","TieRods","top","bottom"],
                    "expr":"0"
                }
            }
        }
    },
    "PostProcess":
    {
        "thermoelectric":
        {
            "Exports":
            {
                "fields":["heat.temperature","electric.electric-potential","electric.current-density","electric.electric-field","heat.pid"]
            }
        },
        "heat":
        {
            "Measures":
            {
                "Statistics":
                {
                    "FluxV0":
                    {
                        "type":"mean",
                        "expr":"-materials_omega_k*heat_dn_T:materials_omega_k:heat_dn_T",
                        "markers":"Channel0"
                    },
                    "FluxContV0":
                    {
                        "type":"mean",
                        "expr":"0.08*(heat_T-293):heat_T",
                        "markers":"Channel0"
                    },
                    "FluxV1":
                    {
                        "type":"mean",
                        "expr":"-materials_omega_k*heat_dn_T:materials_omega_k:heat_dn_T",
                        "markers":"Channel1"
                    },
                    "FluxContV1":
                    {
                        "type":"mean",
                        "expr":"0.08*(heat_T-293):heat_T",
                        "markers":"Channel1"
                    },
                    "FluxCoolingHoles":
                    {
                        "type":"mean",
                        "expr":"-materials_omega_k*heat_dn_T:materials_omega_k:heat_dn_T",
                        "markers":"CoolingHoles"
                    },
                    "FluxContCoolingHoles":
                    {
                        "type":"mean",
                        "expr":"0.08*(heat_T-293):heat_T",
                        "markers":"CoolingHoles"
                    },
                    "FluxTieRods":
                    {
                        "type":"mean",
                        "expr":"-materials_omega_k*heat_dn_T:materials_omega_k:heat_dn_T",
                        "markers":"TieRods"
                    },
                    "FluxContTieRods":
                    {
                        "type":"mean",
                        "expr":"0.08*(heat_T-293):heat_T",
                        "markers":"TieRods"
                    },
                    "temp":
                    {
                        "type":["max","mean","min"],
                        "field":"temperature"
                    }
                }
            }
        },
        "electric":
        {
            "Measures":
            {
                "Statistics":
                {
                    "Intensity0":
                    {
                        "type":"integrate",
                        "expr":"-materials_omega_sigma*electric_dn_P:materials_omega_sigma:electric_dn_P",
                        "markers":"V0"
                    },
                    "Intensity1":
                    {
                        "type":"integrate",
                        "expr":"-materials_omega_sigma*electric_dn_P:materials_omega_sigma:electric_dn_P",
                        "markers":"V1"
                    },
                    "Power":
                    {
                        "type":"integrate",
                        "expr":"materials_omega_sigma*(electric_grad_P_x^2+electric_grad_P_y^2+electric_grad_P_z^2):materials_omega_sigma:electric_grad_P_x:electric_grad_P_y:electric_grad_P_z",
                        "markers":"omega"
                    }
                }
            }
        }
    }
}
